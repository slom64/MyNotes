## magice methods 
- php: 
	- `__sleep()` If `__serialize()` does **not** exist, PHP looks for `__sleep()`. It must return an array of property names that should be saved.
	- `__wakeup()` If `__unserialize()` does **not** exist, PHP runs `__wakeup()`.
	- `__unserialize()`
	- `__destruct()`: this always run at the end.
	- `__get()`: This function will be called when you try to access attribute doesn't exists in the object class. `student->door` --> this will invoke `__get()`. This very useful when you inject class object in as attribute of another class object.
	- `__toString()`: this function executed when the object is treated as string like `concatenation`, `echo $object`.




> [!Attention] 
> When you try to build your own serialized object, make sure you are identical to server in `class name`, `file structure`, `version`.


> [!Attention]
> In loosely typed languages like php, You can inject malicious attribute as a class inside the original object class. We do this because maybe the second class has interesting function like `__get()` that will execute code. So we inhance our attack surface by injecting objects of another class as an attribute in another object. This can work also in strong type languages but in small specific scenarios.
> ```
> CustomTemplate->default_desc_type = "rm /home/carlos/morale.txt";
CustomTemplate->desc = DefaultMap;
DefaultMap->callback = "exec"
> ```

https://portswigger.net/web-security/deserialization/exploiting/lab-deserialization-developing-a-custom-gadget-chain-for-php-deserialization#:~:text=O%3A14%3A%22CustomTemplate%22%3A2%3A%7Bs%3A17%3A%22default%5Fdesc%5Ftype%22%3Bs%3A26%3A%22rm%20%2Fhome%2Fcarlos%2Fmorale%2Etxt%22%3Bs%3A4%3A%22desc%22%3BO