- kerberos is `centralize authentication` to avoid all services having to know every user's credentials.
- Services doesn't know the groups of the user. So, services relies on `TGS`to tell them what groups the user is joined to. thats why we add more groups in `silver ticktet`.
- Using MiTM to sniff `TGT` is useless, you can't use ticket by this method. But you can compromise extract and reuse tickets that are stored in the compromised machine.
- The FORWARDABLE flag is never set for accounts that are configured as ‚Äú`sensitive for delegation`‚Äù (the USER_NOT_DELEGATED attribute is set to true) or for members of the `Protected Users` group.
- If i didn't specify the service in the SPN`<serivce>/<hostname>` that make you enable delegation for all services.


| Type                                                                     | AD Attribute                                                   | Key Behavior                                                                                                                                                                                                                       | Security Risk |
| ------------------------------------------------------------------------ | -------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- |
| **Unconstrained delegation**                                             | `TrustedForDelegation`                                         | Service can impersonate _any_ user to _any_ other service once it gets a TGT                                                                                                                                                       | üî• High       |
| **Constrained delegation (normal)**                                      | `msDS-AllowedToDelegateTo`                                     | Service can impersonate users **only to specific target SPNs**                                                                                                                                                                     | ‚ö†Ô∏è Moderate   |
| **Constrained delegation with protocol transition (S4U2Self/S4U2Proxy)** | `msDS-AllowedToDelegateTo` + `TrustedToAuthForDelegation` flag | Service can **impersonate arbitrary users** _without_ getting a ticket from them first. `TrustedToAuthForDelegation` used <br>to enable **Protocol Transition** ‚Äî using Kerberos extensions called **S4U2Self** and **S4U2Proxy**. | ‚ö†Ô∏è Still high |
| RBCD                                                                     | `msDS-AllowedToActOnBehalfOfOtherIdentity`                     | Delegation is configured on the _source_ object                                                                                                                                                                                    |               |

| Flag name                        | Bit (hex)   | Description                                                      |
| -------------------------------- | ----------- | ---------------------------------------------------------------- |
| `TRUSTED_FOR_DELEGATION`         | `0x80000`   | Account is trusted for _unconstrained delegation_                |
| `TRUSTED_TO_AUTH_FOR_DELEGATION` | `0x1000000` | Account can perform _protocol transition_ (S4U2Self + S4U2Proxy) |