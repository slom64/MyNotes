Domain users and their SID:
```sql
SELECT name, sid, type_desc  FROM sys.server_principals  WHERE type IN ('U', 'G') AND name NOT LIKE '##%'; -- Exclude internal SQL accounts
```

General users enum
```
SELECT sp.name AS LoginName, sp.type_desc AS LoginType, sp.is_disabled AS IsDisabled, CONVERT(VARCHAR(1000), sp.sid, 1) AS SIDHex,  sp.create_date AS CreatedDate, sp.modify_date AS ModifiedDate, sp.default_database_name AS DefaultDatabase, sp.default_language_name AS DefaultLanguage, CASE WHEN rm.role_principal_id IS NOT NULL THEN 'Yes' ELSE 'No' END AS IsSysAdmin, CASE WHEN pw.is_policy_checked = 1 THEN 'Yes' ELSE 'No' END AS PasswordPolicyEnforced, CASE WHEN pw.is_expiration_checked = 1 THEN 'Yes' ELSE 'No' END AS PasswordExpirationEnforced FROM sys.server_principals sp LEFT JOIN sys.server_role_members rm ON sp.principal_id = rm.member_principal_id AND rm.role_principal_id = (SELECT principal_id FROM sys.server_principals WHERE name = 'sysadmin') LEFT JOIN sys.sql_logins pw ON sp.principal_id = pw.principal_id WHERE sp.type IN ('S', 'U', 'G') AND sp.name NOT LIKE '##%'  ORDER BY sp.name;
```

**We check which users are members of the sysadmin role**
```
SELECT r.name AS role, m.name AS member FROM sys.server_principals r JOIN sys.server_role_members rm ON r.principal_id = rm.role_principal_id JOIN sys.server_principals m ON rm.member_principal_id = m.principal_id WHERE r.name = 'sysadmin';
```

We retrieve the current domain name
```
SELECT DEFAULT_DOMAIN() AS mydomain;
```

We retrieve the SID of the `SIGNED\IT`Group
```
SELECT master.sys.fn_varbintohexstr(SUSER_SID('SIGNED\IT'));  
SELECT master.sys.fn_varbintohexstr(SUSER_SID('SIGNED\mssqlsvc'));
```

---

Get SID of user in domain using MSSQL:
```
SELECT SUSER_SID('SIGNED\Domain Admins');
```